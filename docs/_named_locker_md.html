<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sphyrnidae Common Library: Named Locker</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sphyrnidae Common Library
   &#160;<span id="projectnumber">2.0.1</span>
   </div>
   <div id="projectbrief">Shared Utilities/Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_named_locker_md.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Named Locker </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_C__Users_dougb_Desktop_Sphyrnidae_New_Common_Common_Utilities_NamedLocker"></a> </p>
<h1><a class="anchor" id="NamedLockerOverviewMd"></a>
Overview</h1>
<p>The "lock" concept in c# is a way to ensure concurrency concerns are met when it comes to a critical section. Eg. Only 1 thread is allowed into this locked area at a time. There are caveats to this rule - such as if the locked area makes a call which ultimately makes it back to the locked area, it will be allowed in. The problem with the standard method of locking is that it's all-or-nothing. However, there are many situations where you might want to allow lots of different threads into the critical section, as long as they are doing different things.</p>
<p>For example: <a class="el" href="_variable_md.html">Variable</a> lookups. There could be multiple threads all trying to get at the configuration set. You don't want to have all of these threads all making calls to the database, so you place a lock around this call to ensure that only 1 database lookup happens. All the other threads will then be able to use the same set of data (cached) simply by waiting for the first call to succeed. Now let's assume that you are looking up your configuration set that is client/customer specific. In this case, if you have multiple client/customers, each one of those will be allowed into the critical section to perform their lookup of variable/configuration data. However, if you have multiple threads that are trying to get at the exact same data (eg. for the same client/customer), then those can be blocked using the same "name".</p>
<p>The <a class="el" href="class_sphyrnidae_1_1_common_1_1_utilities_1_1_named_locker.html">NamedLocker</a> class is what facilitates this ability. It essentially has a Lock() method which takes the "name" to lock upon, and a method that will be locked on that name.</p>
<h1><a class="anchor" id="NamedLockerWhereUsedMd"></a>
Where Used</h1>
<ol type="1">
<li><a class="el" href="class_sphyrnidae_1_1_common_1_1_logging_1_1_loggers_1_1_file_logger.html">FileLogger</a> (see <a class="el" href="_logging_md.html#LoggingLoggersMd">Loggers</a>): Actual writing to a file is locked on the full filename (allows multiple files to all be written at once)</li>
<li><a class="el" href="class_sphyrnidae_1_1_common_1_1_cache_1_1_caching.html">Caching</a> (see <a class="el" href="_cache_md.html">Cache</a>): The Get() method that optionally executes a method if not found and places the result in the cache... this utilizes the NamedLocker based on the CacheKey</li>
<li><a class="el" href="interface_sphyrnidae_1_1_common_1_1_logging_1_1_interfaces_1_1_i_logger_information.html#a11f58a6048248e4a65be41dee38a5d36">LoggingOrder</a>: Setting of the logging order will be locked based on the <a class="el" href="interface_sphyrnidae_1_1_common_1_1_logging_1_1_interfaces_1_1_i_logger_information.html#ad55f012644aec6f8f214c2ae36b43404">RequestId</a></li>
<li><a class="el" href="_settings_md.html">Settings</a>: Retrieval of the collection of data/settings will be locked on the <a class="el" href="interface_sphyrnidae_1_1_common_1_1_lookup_1_1_i_lookup_settings.html#a29db3e1bc61b03b0f7c77d53424e929f">Key</a></li>
</ol>
<h1><a class="anchor" id="NamedLockerExampleMd"></a>
Examples</h1>
<pre>
    var result = NamedLocker.Lock(customerId.ToString(), num =&gt; {
        // Do something that is customer-specific lookup
        return "my customer information";
    });
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
